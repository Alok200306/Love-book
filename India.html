<!DOCTYPE html>
<html lang="hi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Creator Panel ðŸ’—</title>

<style>
body{
  font-family:Georgia,serif;
  background:linear-gradient(180deg,#fff1f5,#fde2e8);
  padding:20px;
}
.box{
  max-width:520px;
  margin:auto;
  background:#fff;
  padding:26px;
  border-radius:20px;
  box-shadow:0 20px 60px rgba(255,105,135,.25);
}
h1{text-align:center;color:#c9184a;font-weight:normal}
input,textarea{
  width:100%;
  padding:10px;
  margin:8px 0;
  border-radius:12px;
  border:1px solid #f5b7c4;
  font-family:Georgia,serif;
}
button{
  background:#ff4d6d;
  color:#fff;
  border:none;
  padding:10px 22px;
  border-radius:25px;
  cursor:pointer;
}
.entry{
  background:#fff9fb;
  border-left:3px solid #ff758f;
  padding:12px;
  border-radius:12px;
  margin-top:10px;
}
</style>
</head>

<body>

<div class="box">
<h1>ðŸ’— Creator Panel</h1>

<input id="pageName" placeholder="Name (eg: Shreya)">
<input id="password" placeholder="Password">

<hr>

<input id="heading" placeholder="Heading">
<textarea id="shayari" placeholder="Shayari"></textarea>
<button onclick="addEntry()">âž• Add</button>

<div id="list"></div>

<hr>

<label>ðŸŽ§ Voice Message</label>
<input type="file" id="voice" accept="audio/*">

<hr>

<button onclick="saveAll()">ðŸ’¾ Save</button>
</div>

<script type="module">
import { savePage, uploadVoice } from "./firebase.js";

const pageId = new URLSearchParams(location.search).get("id");
if(!pageId){
  alert("Use creator.html?id=uniqueName");
}

let shayariData = [];

window.addEntry = function(){
  shayariData.push({
    heading: heading.value,
    text: shayari.value
  });
  list.innerHTML += `
    <div class="entry">
      <b>${heading.value}</b><br>${shayari.value}
    </div>`;
  heading.value="";
  shayari.value="";
};

window.saveAll = async function(){
  let voiceURL = "";
  if(voice.files[0]){
    voiceURL = await uploadVoice(pageId, voice.files[0]);
  }

  await savePage(pageId,{
    name: pageName.value,
    password: password.value,
    shayariData,
    voiceURL
  });

  alert("Saved successfully ðŸ’—");
};
</script>

</body>
</html>
